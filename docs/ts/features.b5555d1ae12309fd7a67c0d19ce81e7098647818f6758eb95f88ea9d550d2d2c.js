(()=>{class k{constructor(a){this.localStorageKey="ThemeColorScheme";this.bindMatchMedia(),this.currentScheme=this.getSavedScheme(),this.dispatchEvent(document.documentElement.dataset.userColorScheme),a&&this.bindClick(a),document.body.style.transition==""&&document.body.style.setProperty("transition","background-color .3s ease")}saveScheme(){localStorage.setItem(this.localStorageKey,this.currentScheme)}bindClick(a){a.addEventListener("click",b=>{this.isDark()?this.currentScheme="light":this.currentScheme="dark",this.setBodyClass(),this.currentScheme==this.systemPreferScheme&&(this.currentScheme="auto"),this.saveScheme()})}isDark(){return this.currentScheme=="dark"||this.currentScheme=="auto"&&this.systemPreferScheme=="dark"}dispatchEvent(a){const b=new CustomEvent("onColorSchemeChange",{detail:a});window.dispatchEvent(b)}setBodyClass(){this.isDark()?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light",this.dispatchEvent(document.documentElement.dataset.scheme)}getSavedScheme(){const a=localStorage.getItem(this.localStorageKey);return a=="light"||a=="dark"||a=="auto"?a:"auto"}bindMatchMedia(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>{a.matches?this.systemPreferScheme="dark":this.systemPreferScheme="light",this.setBodyClass()})}}var h=k;const e=a=>{if(!a)return;a.remove?a.remove():a.parentNode.removeChild(a)},f=(a,b)=>{a.after?a.after(b):a.parentNode.insertBefore(b,a.nextSibling)},l=a=>{var b=a.parentNode,d=a.innerHTML,c=document.createElement("div");f(b,c),c.appendChild(a),a.innerHTML="",a.appendChild(b),b.innerHTML=d,f(c,c.firstElementChild),e(c)};let i=function(){document.querySelectorAll('.footnotes > ol > li[id^="fn"], #refs > div[id^="ref-"]').forEach(function(a){let b=document.querySelectorAll('a[href="#'+a.id+'"]');if(b.length===0)return;b.forEach(function(g){g.removeAttribute("href")});let d=b[0],c=document.createElement("div");c.className="side side-right";if(/^fn/.test(a.id)){c.innerHTML=a.innerHTML;var n=d.innerHTML;c.firstElementChild.innerHTML='<span class="bg-number">'+n+"</span> "+c.firstElementChild.innerHTML,e(c.querySelector('a[href^="#fnref"]'));let g=d.parentNode;g.tagName==="SUP"&&l(d)}else c.innerHTML=a.outerHTML,d=d.parentNode;f(d,c),d.classList.add("note-ref"),e(a)}),document.querySelectorAll(".footnotes, #refs").forEach(function(a){var b=a.children;if(a.id==="refs")return b.length===0&&e(a);if(b.length!==2||b[0].tagName!=="HR"||b[1].tagName!=="OL")return;b[1].childElementCount===0&&e(a)})};let j=!1;document.currentScript&&(j=document.currentScript.dataset.enableFootnotes=="true");const m=()=>{new h(document.getElementById("dark-mode-button")),j&&i()};window.addEventListener("load",()=>{setTimeout(function(){m()},0)});})();
