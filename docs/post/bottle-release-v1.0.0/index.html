<!DOCTYPE html>
<html lang="en-us">
    
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="theme-color" content="dark">
    <title>Bottle Release V1.0.0 | æ‰“ç åŒ </title>

    
    
    
    <meta property="og:site_name" content="æ‰“ç åŒ  | ibyte.me" />
    <meta property="og:title" content="Bottle Release V1.0.0 | æ‰“ç åŒ "/>
    <meta itemprop="name" content="Bottle Release V1.0.0 | æ‰“ç åŒ " />
    <meta name="twitter:title" content="Bottle Release V1.0.0 | æ‰“ç åŒ " />
    <meta name="application-name" content="Bottle Release V1.0.0 | æ‰“ç åŒ " />


    <meta name="description" content="Share computer science and technology, Golang, Rust, distributed systems, system design articles." />
    <meta name="twitter:description" content="Share computer science and technology, Golang, Rust, distributed systems, system design articles."/>
    <meta itemprop="description" content="Share computer science and technology, Golang, Rust, distributed systems, system design articles."/>
    <meta property="og:description" content="Share computer science and technology, Golang, Rust, distributed systems, system design articles." />

    

<meta property="og:type" content="article" />
<meta property="article:publisher" content="Leon Ding" />
<meta property="og:article:published_time" content=2022-03-08T14:58:14&#43;0800 />
<meta property="article:published_time" content=2022-03-08T14:58:14&#43;0800 />





<script defer type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Bottle Release V1.0.0",
    "author": {
      "@type": "Person",
      "name": "Leon Ding"
    },
    "datePublished": "2022-03-08",
    "description": "",
    "wordCount":  452 ,
    "mainEntityOfPage": "True",
    "dateModified": "2022-03-08",
    "publisher": {
      "@type": "Organization",
      "name": "Leon Ding",
      "logo": {
        "@type": "imageObject",
        "url": "http:\/\/blog.ibyte.me\/favicon.ico"
      }
    }
  }
</script>


    <link rel="shortcut icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/38412458?v=4" />
    
    
    <link rel="stylesheet" href="/sass/main.min.3b60735c96f5faa623d75aceae8ee0a0c7d19f76a3eed0574c61f7253a4eeb3d.css">
    
</head>
    <script>
    (function() {
        const colorSchemeKey = 'ThemeColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.userColorScheme = 'dark';
        } else {
            document.documentElement.dataset.userColorScheme = 'light';
        }
    })();
</script>

    <body class="dark">
        <nav class="navbar">
    <div class="container">
        <div class="flex">
            <div>
                <a class="brand" href="/">
                    
                    
                        <img src="https://avatars.githubusercontent.com/u/38412458?v=4" />
                    
                    æ‰“ç åŒ 
                    </a>
            </div>
            <div class="flex">
                
                <a href="https://www.ibyte.me/">ğŸ¡ Home</a>
                
                <a href="/articles/">ğŸ“š Articles</a>
                
                <button id="dark-mode-button">
                  <svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="#FFD983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163 0 1 0 1.643 1.641a1.163 1.163 0 0 0-1.643-1.641zm-16.022 14.38a1.74 1.74 0 0 0 0 2.465a1.742 1.742 0 1 0 0-2.465zm13.968-2.147a2.904 2.904 0 0 1-4.108 0a2.902 2.902 0 0 1 0-4.107a2.902 2.902 0 0 1 4.108 0a2.902 2.902 0 0 1 0 4.107z" fill="#FFCC4D"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)" /></svg>
                  <svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="#FFD983" d="M16 2s0-2 2-2s2 2 2 2v2s0 2-2 2s-2-2-2-2V2zm18 14s2 0 2 2s-2 2-2 2h-2s-2 0-2-2s2-2 2-2h2zM4 16s2 0 2 2s-2 2-2 2H2s-2 0-2-2s2-2 2-2h2zm5.121-8.707s1.414 1.414 0 2.828s-2.828 0-2.828 0L4.878 8.708s-1.414-1.414 0-2.829c1.415-1.414 2.829 0 2.829 0l1.414 1.414zm21 21s1.414 1.414 0 2.828s-2.828 0-2.828 0l-1.414-1.414s-1.414-1.414 0-2.828s2.828 0 2.828 0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828 0s0-2.828 0-2.828l1.414-1.414s1.414-1.414 2.828 0s0 2.828 0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828 0s0-2.828 0-2.828l1.414-1.414s1.414-1.414 2.828 0s0 2.828 0 2.828l-1.414 1.414zM16 32s0-2 2-2s2 2 2 2v2s0 2-2 2s-2-2-2-2v-2z"/><circle fill="#FFD983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)" /></svg>
                </button>
            </div>
            </div>
    </div>
</nav>
        <main>
            
<div class="container">
    <article>
        <header class="article-header">
            <div class="thumb">
                <div>
                    <h1>Bottle Release V1.0.0</h1>
                    <div class="post-meta">
                        <div>
                            
                            
                              
                            
                            By Leon Ding | <time>March 08, 2022</time>
                            | 3 minutes
                        </div>
                        <div class="tags">
                            
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </article>

    <div class="article-post">
    <blockquote>
<p>Hi (à¹‘â•¹â—¡â•¹)ï¾‰â€ï¼Œå„ä½<code>Gopher</code>æœ¬äººæœ€è¿‘åˆç”¨<code>Go</code>é€ äº†ä¸€ä¸ªè½®å­ï¼Œä¸€ä¸ªè¶…çº§è½»é‡çº§<code>KV</code>å­˜å‚¨å¼•æ“ï¼Œæ¬¢è¿ğŸ‘ğŸ»å„ä½<code>Gopher</code>è¿›è¡Œè¯„æµ‹ã€‚</p>
</blockquote>
<p>ä¸»é¡µä»‹ç»ï¼š<a href="https://bottle.ibyte.me">https://bottle.ibyte.me</a> (PCæ•ˆæœæ›´åŠ ğŸ˜‹)</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/auula/bottle">https://github.com/auula/bottle</a></p>
<h3 id="ç‰¹-æ€§">
    <a href="#%e7%89%b9-%e6%80%a7" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    ç‰¹ æ€§
</h3>
<ul>
<li>åµŒå…¥çš„å­˜å‚¨å¼•æ“</li>
<li>æ•°æ®å¯ä»¥åŠ å¯†å­˜å‚¨</li>
<li>å¯ä»¥è‡ªå®šä¹‰å®ç°å­˜å‚¨åŠ å¯†å™¨</li>
<li>å³ä½¿æ•°æ®æ–‡ä»¶è¢«æ‹·è´ï¼Œä¹Ÿä¿è¯å­˜å‚¨æ•°æ®çš„å®‰å…¨</li>
<li>æœªæ¥ç´¢å¼•æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥æ”¯æŒè‡ªå®šä¹‰å®ç°</li>
</ul>
<h3 id="ç®€-ä»‹">
    <a href="#%e7%ae%80-%e4%bb%8b" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    ç®€ ä»‹
</h3>
<p>é¦–å…ˆè¦è¯´æ˜çš„æ˜¯<code>Bottle</code>æ˜¯ä¸€æ¬¾<code>KV</code>åµŒå…¥å¼å­˜å‚¨å¼•æ“ï¼Œå¹¶éæ˜¯ä¸€æ¬¾<code>KV</code>æ•°æ®åº“ï¼Œæˆ‘çŸ¥é“å¾ˆå¤šäººçœ‹åˆ°äº†<code>KV</code>è®¤ä¸ºæ˜¯æ•°æ®åº“ï¼Œå½“ç„¶ä¸æ˜¯äº†ï¼Œå¾ˆå¤šäººä¼šæŠŠè¿™äº›ææ··æ·†æ‰ï¼Œ<code>KV</code>
å­˜å‚¨å¯ä»¥ç”¨æ¥å­˜å‚¨å¾ˆå¤šä¸œè¥¿ï¼Œè€Œå¹¶éæ˜¯æ•°æ®åº“è¿™ä¸€é¢†åŸŸã€‚å¯ä»¥è¿™ä¹ˆç†è§£æ•°æ®åº“æ˜¯ä¸€å°æ±½è½¦ï¼Œé‚£ä¹ˆ<code>Bottle</code>æ˜¯ä¸€å°è½¦çš„å‘åŠ¨æœºã€‚å¯ä»¥ç®€å•ç†è§£<code>Bottle</code>æ˜¯ä¸€ä¸ªå¯¹æ“ä½œç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿçš„<code>KV</code>æŠ½è±¡åŒ–å°è£…ï¼Œå¯ä»¥åŸºäº<code>Bottle</code>
åšä¸ºå­˜å‚¨å±‚ï¼Œåœ¨<code>Bottle</code>å±‚ä¹‹ä¸Šå°è£…ä¸€äº›æ•°æ®ç»“æ„å’Œå¯¹å¤–æœåŠ¡çš„åè®®å°±å¯ä»¥å®ç°ä¸€ä¸ªæ•°æ®åº“ã€‚</p>
<p><img loading="lazy" 
    src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e393267aa3b445bfa003418bbde9465e~tplv-k3u1fbpfcp-zoom-1.image" 
    alt="å±‚æ¬¡æ¶æ„å›¾" 
     /></p>
<p>æœ¬é¡¹ç›®åŠŸèƒ½å®ç°å®Œå…¨åŸºäº <a href="https://blog.ibyte.me/post/bitcask-kvbase/"><code>bitcask</code></a> è®ºæ–‡æ‰€å®ç°ï¼Œå¦å¤–æœ¬é¡¹ç›®æ‰€ç”¨åˆ°ä¸€äº›çŸ¥è¯†å’Œ<code>å¡å†…åŸºæ¢…éš†å¤§å­¦</code>çš„<code>CMU 15-445: Database Systems</code>è¯¾ç¨‹å†…å®¹å¾ˆæ¥è¿‘ï¼Œè¿™é—¨è¯¾ç”±æ•°æ®åº“é¢†åŸŸçš„å¤§ç‰›<code>Andy Pavlo</code>è®²æˆï¼Œæœ‰æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å»çœ‹çœ‹è¿™å¥—è¯¾ï¼Œå¦‚æœè§‰å¾—ä¸é”™ä½ å¯ä»¥ç»™æˆ‘æŒ‰ä¸€é¢—å°æ˜Ÿ<code>â­</code>è°¢è°¢ã€‚</p>
<h3 id="å®‰è£…bottle">
    <a href="#%e5%ae%89%e8%a3%85bottle" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    å®‰è£…Bottle
</h3>
<p>ä½ åªéœ€è¦åœ¨ä½ çš„é¡¹ç›®ä¸­å®‰è£…<code>Bottle</code>æ¨¡å—å³å¯ä½¿ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">go get -u github.com/auula/bottle
</code></pre></td></tr></table>
</div>
</div><h3 id="åŸºæœ¬api">
    <a href="#%e5%9f%ba%e6%9c%acapi" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    åŸºæœ¬API
</h3>
<p>å¦‚ä½•æ“ä½œä¸€ä¸ª<code>Bottle</code>å®ä¾‹ä»£ç :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;fmt&#34;</span>
    <span class="s">&#34;github.com/auula/bottle&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// é€šè¿‡é»˜è®¤é…ç½®æ‰“å¼€ä¸€ä¸ªå­˜å‚¨å®ä¾‹
</span><span class="c1"></span>    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">bottle</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">bottle</span><span class="p">.</span><span class="nx">DefaultOption</span><span class="p">)</span>
    <span class="c1">// å¹¶ä¸”å¤„ç†ä¸€ä¸‹å¯èƒ½å‘ç”Ÿçš„é”™è¯¯
</span><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Userinfo æµ‹è¯•æ•°æ®ç»“æ„
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Userinfo</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Name</span>  <span class="kt">string</span>
    <span class="nx">Age</span>   <span class="kt">uint8</span>
    <span class="nx">Skill</span> <span class="p">[]</span><span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// PUT Data
</span><span class="c1"></span>    <span class="nx">bottle</span><span class="p">.</span><span class="nf">Put</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">),</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;66.6&#34;</span><span class="p">))</span>

    <span class="c1">// å¦‚æœè½¬æˆstringé‚£ä¹ˆå°±æ˜¯å­—ç¬¦ä¸²
</span><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">bottle</span><span class="p">.</span><span class="nf">Get</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">)).</span><span class="nf">String</span><span class="p">())</span>

    <span class="c1">// å¦‚æœä¸å­˜åœ¨é»˜è®¤å€¼å°±æ˜¯0
</span><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">bottle</span><span class="p">.</span><span class="nf">Get</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">)).</span><span class="nf">Int</span><span class="p">())</span>

    <span class="c1">// å¦‚æœä¸æˆåŠŸå°±æ˜¯false
</span><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">bottle</span><span class="p">.</span><span class="nf">Get</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">)).</span><span class="nf">Bool</span><span class="p">())</span>

    <span class="c1">// å¦‚æœä¸æˆåŠŸå°±æ˜¯0.0
</span><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">bottle</span><span class="p">.</span><span class="nf">Get</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">)).</span><span class="nf">Float</span><span class="p">())</span>

    <span class="nx">user</span> <span class="o">:=</span> <span class="nx">Userinfo</span><span class="p">{</span>
        <span class="nx">Name</span><span class="p">:</span>  <span class="s">&#34;Leon Ding&#34;</span><span class="p">,</span>
        <span class="nx">Age</span><span class="p">:</span>   <span class="mi">22</span><span class="p">,</span>
        <span class="nx">Skill</span><span class="p">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;Java&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="s">&#34;Rust&#34;</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">u</span> <span class="nx">Userinfo</span>

    <span class="c1">// é€šè¿‡Bsonä¿å­˜æ•°æ®å¯¹è±¡ï¼Œå¹¶ä¸”è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º5ç§’ï¼ŒTTLè¶…æ—¶å¯ä»¥ä¸è®¾ç½®çœ‹éœ€æ±‚
</span><span class="c1"></span>    <span class="nx">bottle</span><span class="p">.</span><span class="nf">Put</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;user&#34;</span><span class="p">),</span> <span class="nx">bottle</span><span class="p">.</span><span class="nf">Bson</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">),</span> <span class="nx">bottle</span><span class="p">.</span><span class="nf">TTL</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

    <span class="c1">// é€šè¿‡Unwrapè§£æå‡ºç»“æ„ä½“
</span><span class="c1"></span>    <span class="nx">bottle</span><span class="p">.</span><span class="nf">Get</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;user&#34;</span><span class="p">)).</span><span class="nf">Unwrap</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">u</span><span class="p">)</span>

    <span class="c1">// æ‰“å°å–å€¼
</span><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span>

    <span class="c1">// åˆ é™¤ä¸€ä¸ªkey
</span><span class="c1"></span>    <span class="nx">bottle</span><span class="p">.</span><span class="nf">Remove</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">))</span>

    <span class="c1">// å…³é—­å¤„ç†ä¸€ä¸‹å¯èƒ½å‘ç”Ÿçš„é”™è¯¯
</span><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">bottle</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="åŠ å¯†å™¨">
    <a href="#%e5%8a%a0%e5%af%86%e5%99%a8" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    åŠ å¯†å™¨
</h3>
<p>æ•°æ®åŠ å¯†å™¨æ˜¯é’ˆå¯¹æ•°æ®çš„<code>value</code>è®°å½•çš„ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹å­—æ®µçº§åˆ«çš„åŒºå—åŠ å¯†ï¼Œå¹¶éæ˜¯æŠŠæ•´ä¸ªæ–‡ä»¶åŠ å¯†ä¸€éï¼Œé‚£æ ·è®¾è®¡ä¼šå¸¦æ¥æ€§èƒ½æ¶ˆè€—ï¼Œæ‰€ä»¥é‡‡ç”¨åŒºå—æ•°æ®æ®µæ–¹å¼åŠ å¯†çš„æ–¹å¼ã€‚</p>
<p>ä¸‹é¢ä¾‹å­æ˜¯é€šè¿‡<a href="https://github.com/auula/bottle/blob/main/option.go#L66"><code>bottle.SetEncryptor(Encryptor,[]byte)</code></a>
å‡½æ•°å»è®¾ç½®æ•°æ®åŠ å¯†å™¨å¹¶ä¸”é…ç½®<code>16</code>ä½çš„æ•°æ®åŠ å¯†ç§˜é’¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">bottle</span><span class="p">.</span><span class="nf">SetEncryptor</span><span class="p">(</span><span class="nx">bottle</span><span class="p">.</span><span class="nf">AES</span><span class="p">(),</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;1234567890123456&#34;</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å»å®ç°æ•°æ®åŠ å¯†å™¨çš„æ¥å£ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// SourceData for encryption and decryption
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">SourceData</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Data</span>   <span class="p">[]</span><span class="kt">byte</span>
    <span class="nx">Secret</span> <span class="p">[]</span><span class="kt">byte</span>
<span class="p">}</span>

<span class="c1">// Encryptor used for data encryption and decryption operation
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Encryptor</span> <span class="kd">interface</span> <span class="p">{</span>
    <span class="nf">Encode</span><span class="p">(</span><span class="nx">sd</span> <span class="o">*</span><span class="nx">SourceData</span><span class="p">)</span> <span class="kt">error</span>
    <span class="nf">Decode</span><span class="p">(</span><span class="nx">sd</span> <span class="o">*</span><span class="nx">SourceData</span><span class="p">)</span> <span class="kt">error</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸‹é¢ä»£ç å°±æ˜¯å†…ç½®<code>AES</code>åŠ å¯†å™¨çš„å®ç°ä»£ç ï¼Œå®ç°<a href="https://github.com/auula/bottle/blob/main/encrypted.go#21"><code>bottle.Encryptor</code></a>
æ¥å£å³å¯ï¼Œæ•°æ®æºä¸º<a href="https://github.com/auula/bottle/blob/main/encrypted.go#15"><code>bottle.SourceData</code></a> ç»“æ„ä½“å­—æ®µï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// AESEncryptor Implement the Encryptor interface
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">AESEncryptor</span> <span class="kd">struct</span><span class="p">{}</span>

<span class="c1">// Encode source data encode
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">AESEncryptor</span><span class="p">)</span> <span class="nf">Encode</span><span class="p">(</span><span class="nx">sd</span> <span class="o">*</span><span class="nx">SourceData</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="nx">sd</span><span class="p">.</span><span class="nx">Data</span> <span class="p">=</span> <span class="nf">aesEncrypt</span><span class="p">(</span><span class="nx">sd</span><span class="p">.</span><span class="nx">Data</span><span class="p">,</span> <span class="nx">sd</span><span class="p">.</span><span class="nx">Secret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="c1">// Decode source data decode
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">AESEncryptor</span><span class="p">)</span> <span class="nf">Decode</span><span class="p">(</span><span class="nx">sd</span> <span class="o">*</span><span class="nx">SourceData</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="nx">sd</span><span class="p">.</span><span class="nx">Data</span> <span class="p">=</span> <span class="nf">aesDecrypt</span><span class="p">(</span><span class="nx">sd</span><span class="p">.</span><span class="nx">Data</span><span class="p">,</span> <span class="nx">sd</span><span class="p">.</span><span class="nx">Secret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å…·ä½“çš„åŠ å¯†å™¨å®ç°ä»£ç å¯ä»¥æŸ¥çœ‹<a href="./encrypted.go"><code>encrypted.go</code></a></p>
<h3 id="æ•£åˆ—å‡½æ•°">
    <a href="#%e6%95%a3%e5%88%97%e5%87%bd%e6%95%b0" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    æ•£åˆ—å‡½æ•°
</h3>
<p>å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰å®ç°æ•£åˆ—å‡½æ•°ï¼Œå®ç°<a href="https://github.com/auula/bottle/blob/main/hashed.go#10"><code>bottle.Hashed</code></a> æ¥å£å³å¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Hashed</span> <span class="kd">interface</span> <span class="p">{</span>
    <span class="nf">Sum64</span><span class="p">([]</span><span class="kt">byte</span><span class="p">)</span> <span class="kt">uint64</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ç„¶åé€šè¿‡å†…ç½®çš„<a href="https://github.com/auula/bottle/blob/main/option.go#85"><code>bottle.SetHashFunc(hash Hashed)</code></a> è®¾ç½®å³å¯å®Œæˆä½ çš„æ•£åˆ—å‡½æ•°é…ç½®ã€‚</p>
<h3 id="ç´¢å¼•å¤§å°">
    <a href="#%e7%b4%a2%e5%bc%95%e5%a4%a7%e5%b0%8f" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    ç´¢å¼•å¤§å°
</h3>
<p>ç´¢å¼•é¢„è®¾ç½®çš„å¤§å°å¾ˆå¤§ç¨‹åº¦ä¸Šä¼šå½±å“ä½ çš„ç¨‹åºå­˜å–å’Œè¯»å–æ•°æ®çš„é€Ÿåº¦ï¼Œå¦‚æœåœ¨åˆå§‹åŒ–çš„æ—¶å€™èƒ½å¤Ÿé¢„è®¡å‡ºç¨‹åºè¿è¡Œæ—¶éœ€è¦çš„ç´¢å¼•å¤§å°ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–çš„æ—¶å€™é…ç½®å¥½ï¼Œå¯ä»¥å‡å°ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¸¦æ¥çš„è¿è¡Œæ•°æ®è¿ç§»å’Œæ‰©å®¹å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// è®¾ç½®ç´¢å¼•å¤§å° 
</span><span class="c1"></span>    <span class="nx">bottle</span><span class="p">.</span><span class="nf">SetIndexSize</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="é…ç½®ä¿¡æ¯">
    <a href="#%e9%85%8d%e7%bd%ae%e4%bf%a1%e6%81%af" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    é…ç½®ä¿¡æ¯
</h3>
<p>ä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„<a href="https://github.com/auula/bottle/blob/main/option.go#14"><code>bottle.Option</code></a> çš„ç»“æ„ä½“åˆå§‹åŒ–ä½ å­˜å‚¨å¼•æ“ï¼Œé…ç½®å®ä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// è‡ªå®šä¹‰é…ç½®ä¿¡æ¯
</span><span class="c1"></span>        <span class="nx">option</span> <span class="o">:=</span> <span class="nx">bottle</span><span class="p">.</span><span class="nx">Option</span><span class="p">{</span>
        <span class="c1">// å·¥ä½œç›®å½•
</span><span class="c1"></span>        <span class="nx">Directory</span><span class="p">:</span>       <span class="s">&#34;./data&#34;</span><span class="p">,</span>
        <span class="c1">// ç®—æ³•å¼€å¯åŠ å¯†
</span><span class="c1"></span>        <span class="nx">Enable</span><span class="p">:</span>          <span class="kc">true</span><span class="p">,</span>
        <span class="c1">// è‡ªå®šä¹‰ç§˜é’¥ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ç§˜é’¥
</span><span class="c1"></span>        <span class="nx">Secret</span><span class="p">:</span>          <span class="nx">bottle</span><span class="p">.</span><span class="nx">Secret</span><span class="p">,</span>
        <span class="c1">// è‡ªå®šä¹‰æ•°æ®å¤§å°ï¼Œå­˜å‚¨å•ä½æ˜¯kb
</span><span class="c1"></span>        <span class="nx">DataFileMaxSize</span><span class="p">:</span> <span class="mi">1048576</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1">// é€šè¿‡è‡ªå®šä¹‰é…ç½®ä¿¡æ¯
</span><span class="c1"></span>    <span class="nx">bottle</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">option</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å†…ç½®çš„<a href="https://github.com/auula/bottle/blob/main/bottle.go#157"><code>bottle.Load(path string)</code></a> å‡½æ•°åŠ è½½é…ç½®æ–‡ä»¶å¯åŠ¨<code>Bottle</code>
ï¼Œé…ç½®æ–‡ä»¶æ ¼å¼ä¸º<code>yaml</code>ï¼Œå¯é…ç½®é¡¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="c"># Bottle config options</span><span class="w">
</span><span class="w"></span><span class="nt">Enable</span><span class="p">:</span><span class="w"> </span><span class="kc">TRUE</span><span class="w">
</span><span class="w"></span><span class="nt">Secret</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;1234567890123456&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">Directory</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;./testdata&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">DataFileMaxSize</span><span class="p">:</span><span class="w"> </span><span class="m">536870912</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>éœ€è¦æ³¨æ„çš„æ˜¯å†…ç½®çš„åŠ å¯†å™¨å®ç°çš„ç§˜é’¥å¿…é¡»æ˜¯<code>16</code>
ä½ï¼Œå¦‚æœä½ æ˜¯è‡ªå®šä¹‰å®ç°çš„åŠ å¯†å™¨å¯é€šè¿‡<a href="https://github.com/auula/bottle/blob/main/option.go#L66"><code>bottle.SetEncryptor(Encryptor,[]byte)</code></a>
è®¾ç½®ä½ è‡ªå®šä¹‰çš„åŠ å¯†å™¨ï¼Œé‚£è¿™ä¸ªç§˜é’¥ä½æ•°å°†ä¸å—é™åˆ¶ã€‚</p>
<h3 id="æ•°æ®ç›®å½•">
    <a href="#%e6%95%b0%e6%8d%ae%e7%9b%ae%e5%bd%95" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    æ•°æ®ç›®å½•
</h3>
<p>ç”±äº<code>bottle</code>è®¾è®¡å°±æ˜¯åŸºäºä½†è¿›ç¨‹çš„ç¨‹åºï¼Œæ‰€ä»¥æ¯ä¸ªå­˜å‚¨å®ä¾‹å¯¹åº”æ˜¯ä¸€ä¸ªæ•°æ®ç›®å½•ï¼Œ<code>data</code>ä¸ºæ—¥å¿—åˆå¹¶ç»“æ„æ•°æ®ç›®å½•ï¼Œ<code>index</code>ä¸ºç´¢å¼•æ•°æ®ç‰ˆæœ¬ã€‚</p>
<p>æ—¥å¿—åˆå¹¶ç»“æ„æ•°æ®ç›®å‰ç‰ˆæœ¬æ˜¯æ¯æ¬¡æ•°æ®å¯åŠ¨æ—¶å€™è¿›è¡Œåˆå¹¶ï¼Œé»˜è®¤æ˜¯<code>data</code>æ•°æ®æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ•°æ®æ–‡ä»¶å ç”¨æ€»å’Œè¶…è¿‡<code>1GB</code>å°±ä¼šè§¦å‘ä¸€æ¬¡åˆå¹¶ï¼Œåˆå¹¶ä¹‹åæ²¡æœ‰ç”¨çš„æ•°æ®è¢«ä¸¢å¼ƒã€‚</p>
<p>å½“ç„¶å¦‚æœæœªè¾¾åˆ°è„æ•°æ®åˆå¹¶è¦æ±‚ï¼Œæ•°æ®æ–‡ä»¶ä¼šä»¥å¯åŠ¨æ—¶å€™é…ç½®çš„å¤§å°è¿›è¡Œå½’æ¡£ï¼Œæ¯ä¸ªæ•°æ®æœ‰ç‰ˆæœ¬å·ï¼Œå¹¶ä¸”è¢«è®¾ç½®ä¸ºåªè¯»æŒ‚è½½ï¼Œè¿›ç¨‹å·¥ä½œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">./testdata
â”œâ”€â”€ data
â”‚   â””â”€â”€ 1.data
â””â”€â”€ index
    â”œâ”€â”€ 1646378326.index
    â””â”€â”€ 1646378328.index

<span class="m">2</span> directories, <span class="m">3</span> files
</code></pre></td></tr></table>
</div>
</div><p>å½“å­˜å‚¨å¼•æ“å¼€å§‹å·¥ä½œçš„æ—¶å€™ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ‰€ä»¥æ–‡ä»¶å¤¹å’Œæ–‡ä»¶åªèƒ½è¢«è¿™ä¸ªè¿›ç¨‹æ“ä½œï¼Œä¿è¯æ•°æ®å®‰å…¨ã€‚</p>
<h3 id="åç»­ç»´æŠ¤">
    <a href="#%e5%90%8e%e7%bb%ad%e7%bb%b4%e6%8a%a4" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    åç»­ç»´æŠ¤
</h3>
<ul>
<li><code>Bottle</code>ç›®å‰ä¸æ”¯æŒå¤šæ•°æ®å­˜å‚¨åˆ†åŒºï¼Œåç»­ç‰ˆæœ¬ä¼šå¼•å…¥ä¸€ä¸ª<code>Bucket</code>æ¦‚å¿µï¼Œæœªæ¥å¯ä»¥æŠŠæŒ‡å®šçš„æ•°æ®å­˜å‚¨åˆ°æŒ‡å®šçš„åˆ†åŒºä¸­ï¼Œæ¥é™ä½å¹¶å‘çš„æ—¶å€™ç´¢å¼•é”çš„é¢—ç²’åº¦ã€‚</li>
<li>åç»­å°†å¼•å…¥<code>é›¶æ‹·è´æŠ€æœ¯</code>ï¼Œå½“å‰æ–‡ä»¶æ“ä½œå¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºæ“ä½œç³»ç»Ÿï¼Œå½“å‰æ–‡ä»¶å¿…é¡»<code>sync</code>æ‰èƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>è„æ•°æ®åˆå¹¶å¯ä»¥åœ¨è¿è¡Œä¸­è¿›è¡Œåˆå¹¶æ•´ç†ï¼ŒåŸºäº<code>ä¿¡å·é‡</code>çš„æ–¹å¼é€šçŸ¥åƒåœ¾å›æ”¶å·¥ä½œçº¿ç¨‹ã€‚</li>
</ul>
<h3 id="å…¶ä»–ä¿¡æ¯">
    <a href="#%e5%85%b6%e4%bb%96%e4%bf%a1%e6%81%af" class="anchor">
        <svg class="icon" aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16">
            <path fill-rule="evenodd"
                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
            </path>
        </svg>
    </a>
    å…¶ä»–ä¿¡æ¯
</h3>
<p>å¦‚æœä½ å‘ç°äº†<code>bug</code>æ¬¢è¿æ<code>issue</code>æˆ–è€…å‘èµ·<code>pull request</code>ï¼Œæˆ‘æ”¶åˆ°äº†æ¶ˆæ¯ä¼šå°½å¿«å›å¤ä½ ï¼Œå¦å¤–æ¬¢è¿å„ä½<code>Gopher</code>æå‡ºè‡ªå·±æ„è§ï¼Œæˆ–è€…è´¡çŒ®åšè‡ªå·±çš„ä»£ç ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¦å¤–æˆ‘ä»¬ä¹Ÿéå¸¸æ¬¢è¿å¤§å®¶è¿›è¡Œå­˜å‚¨ç›¸å…³æŠ€æœ¯äº¤æµï¼Œä¸é”™çš„è¯åˆ«å¿˜å»<code>Github</code>ç‚¹ä¸€ä¸ª<code>â­</code>Thanksâ™ª(ï½¥Ï‰ï½¥)ï¾‰ã€‚</p>
<p>æ›´è¯¦ç»†çš„é—®é¢˜å¯ä»¥æŸ¥çœ‹ï¼š<a href="https://github.com/auula/bottle">https://github.com/auula/bottle</a></p>

    </div>
</div>

<div class="container">
    
    <nav class="flex container suggested">
        
        <a rel="prev" href="/post/bottle-storage-engine-design/" title="Previous post (older)">
            <span>Previous</span>
            Bottle Storage Engine Design
            </a>
        
        
        
        <a rel="next" href="/post/golang-generic-programming/" title="Next post (newer)">
            <span>Next</span>
            Golang Generic Programming
            </a> 
        
    </nav>
    
</div>
 
<div class="container">
    
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-hugo-tania-netlify-app" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (DISQUS) {
            DISQUS.reset({
                reload: true
            })
        }
    })
</script>

</div>

</main>


        </main>
        <footer class="footer flex">
    <section class="container">
        <nav class="footer-links">
            
            <a href="/index.xml">RSS</a>
            
        </nav>
    </section>
    <script defer src="/ts/features.39c567b3af1363f8abe74bfd650f3d58cb963716b7ad4b3b53f801d3ca585599.js" data-enable-footnotes="true"></script>
</footer>
    </body>
</html>